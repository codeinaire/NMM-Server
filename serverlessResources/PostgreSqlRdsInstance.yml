Type: AWS::RDS::DBInstance
Properties:
  AllocatedStorage: 20
  BackupRetentionPeriod: 35
  CopyTagsToSnapshot: true
  DBInstanceClass: db.t2.micro
  DBName: ${self:custom.DB_NAME}
  DBSubnetGroupName:
    Ref: ServerlessSubnetGroup
  DeleteAutomatedBackups: false
  DeletionProtection: true
  EnablePerformanceInsights: true
  EnableCloudwatchLogsExports:
    - 'upgrade'
    - 'postgresql'
  Engine: postgres
  MasterUsername: ${self:custom.USERNAME}
  MasterUserPassword: ${self:custom.PASSWORD}
  MultiAZ: true
  Port: 5432
  PreferredBackupWindow: '15:00-16:00'
  PubliclyAccessible: false
  Tags:
    -
      Key: 'project'
      Value: 'nmm'
  VPCSecurityGroups:
  - !GetAtt ServerlessSecurityGroup.GroupId