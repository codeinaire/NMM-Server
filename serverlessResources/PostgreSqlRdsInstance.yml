Type: AWS::RDS::DBInstance
Properties:
  AllocatedStorage: 20
  BackupRetentionPeriod: 35
  CopyTagsToSnapshot: true
  DBInstanceClass: db.t2.micro
  DBName: ${env:DB_DATABASE}
  DBSubnetGroupName:
    Ref: ServerlessSubnetGroup
  DeleteAutomatedBackups: false
  DeletionProtection: true
  EnablePerformanceInsights: true
  EnableCloudwatchLogsExports:
    - 'upgrade'
    - 'postgresql'
  Engine: postgres
  MasterUsername: ${env:DB_USERNAME}
  MasterUserPassword: ${env:DB_PASSWORD}
  MultiAZ: true
  Port: 5432
  PreferredBackupWindow: '15:00-16:00'
  PubliclyAccessible: false
  Tags:
    -
      Key: 'Name'
      Value: 'NMMDatabase'
  VPCSecurityGroups:
  - !GetAtt ServerlessSecurityGroup.GroupId